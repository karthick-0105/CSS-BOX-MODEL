<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tic Tac Toe</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #c9c1ae;
        margin: 0;
      }
      .game-container {
        background-color: #2b2d42;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
      }
      h1 {
        margin-bottom: 20px;
        color: #edf2f4;
      }
      table {
        border: 4px solid #8d99ae;
        border-collapse: collapse;
        background-color: #2b2d42;
      }
      td {
        width: 60px;
        height: 60px;
        text-align: center;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
        border: 2px solid #8d99ae;
        background-color: #edf2f4;
        color: #2b2d42;
      }
      td:hover {
        background-color: #ef233c;
        color: #edf2f4;
      }
      button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
        background-color: #8d99ae;
        color: #2b2d42;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background-color: #ef233c;
        color: #edf2f4;
      }
      .message {
        font-size: 1.2em;
        margin-top: 20px;
        color: #edf2f4;
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <h1>Tic Tac Toe</h1>
      <table>
        <tr>
          <td onclick="play(this, 0)" class="cell"></td>
          <td onclick="play(this, 1)" class="cell"></td>
          <td onclick="play(this, 2)" class="cell"></td>
        </tr>
        <tr>
          <td onclick="play(this, 3)" class="cell"></td>
          <td onclick="play(this, 4)" class="cell"></td>
          <td onclick="play(this, 5)" class="cell"></td>
        </tr>
        <tr>
          <td onclick="play(this, 6)" class="cell"></td>
          <td onclick="play(this, 7)" class="cell"></td>
          <td onclick="play(this, 8)" class="cell"></td>
        </tr>
      </table>
      <div id="message" class="message">Player X's turn</div>
      <button onclick="reset()">Reset Game</button>
    </div>

    <script>
      let player = "X";
      const cells = document.getElementsByClassName("cell");
      let gameBoard = ["", "", "", "", "", "", "", "", ""];
      let gameActive = true;
      const message = document.getElementById("message");

      const winningPatterns = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6],
      ];

      function play(obj, i) {
        if (gameBoard[i] !== "" || !gameActive || player !== "X") return;
        gameBoard[i] = "X";
        obj.innerHTML = "X";

        if (checkWinner("X")) return endGame("Player X wins!");
        if (!gameBoard.includes("")) return endGame("It's a tie!");

        player = "O";
        message.textContent = "Player O's turn";
        setTimeout(computerMove, 500);
      }

      function computerMove() {
        if (!gameActive) return;

        const move = getBestMove();
        gameBoard[move] = "O";
        cells[move].innerHTML = "O";

        if (checkWinner("O")) return endGame("Player O wins!");
        if (!gameBoard.includes("")) return endGame("It's a tie!");

        player = "X";
        message.textContent = "Player X's turn";
      }

      function getBestMove() {
        for (let i = 0; i < 9; i++) {
          if (gameBoard[i] === "") {
            gameBoard[i] = "O";
            if (checkWinner("O")) {
              gameBoard[i] = "";
              return i;
            }
            gameBoard[i] = "";
          }
        }
        for (let i = 0; i < 9; i++) {
          if (gameBoard[i] === "") {
            gameBoard[i] = "X";
            if (checkWinner("X")) {
              gameBoard[i] = "";
              return i;
            }
            gameBoard[i] = "";
          }
        }

        if (gameBoard[4] === "") return 4;

        const corners = [0, 2, 6, 8].filter((i) => gameBoard[i] === "");
        if (corners.length > 0)
          return corners[Math.floor(Math.random() * corners.length)];

        const empty = gameBoard
          .map((val, idx) => (val === "" ? idx : null))
          .filter((i) => i !== null);
        return empty[Math.floor(Math.random() * empty.length)];
      }

      function checkWinner(p) {
        return winningPatterns.some((pattern) => {
          const [a, b, c] = pattern;
          return gameBoard[a] === p && gameBoard[b] === p && gameBoard[c] === p;
        });
      }

      function endGame(msg) {
        gameActive = false;
        message.textContent = msg;
      }

      function reset() {
        gameBoard = ["", "", "", "", "", "", "", "", ""];
        gameActive = true;
        player = "X";
        message.textContent = "Player X's turn";
        Array.from(cells).forEach((cell) => (cell.innerHTML = ""));
      }
    </script>
  </body>
</html>
